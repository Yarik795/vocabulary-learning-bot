"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –ø—É—Ç–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è
"""

import os
from pathlib import Path
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞
load_dotenv()

# ============================================================================
# –¢–û–ö–ï–ù–´ –ò –ö–õ–Æ–ß–ò
# ============================================================================

TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
OPENROUTER_API_KEY = os.getenv("OPENROUTER_API_KEY")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
if not TELEGRAM_BOT_TOKEN:
    raise ValueError("‚ùå TELEGRAM_BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")
if not OPENROUTER_API_KEY:
    raise ValueError("‚ùå OPENROUTER_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")

# ============================================================================
# –ü–£–¢–ò –ö –ü–ê–ü–ö–ê–ú
# ============================================================================

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
# –í production (Amvera) –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ /data/ (Persistent Storage)
# –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–µ–∫—Ç–∞
if os.path.exists("/data"):
    # Production: Amvera —Å persistent storage
    DATA_DIR = Path("/data")
    LOGS_DIR = Path("/data/logs")
else:
    # –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    BASE_DIR = Path(__file__).parent.parent
    DATA_DIR = BASE_DIR / "data"
    LOGS_DIR = BASE_DIR / "logs"

# –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –ø—É—Ç–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–º–µ—Å—Ç—è—Ç—Å—è –≤ /data/ –Ω–∞ production)
AUDIO_CACHE_DIR = DATA_DIR / "audio_cache"
VARIANTS_CACHE_DIR = DATA_DIR / "variants_cache"

# ============================================================================
# –ü–ê–†–ê–ú–ï–¢–†–´ –û–ë–£–ß–ï–ù–ò–Ø (–ª–µ–≥–∫–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ)
# ============================================================================

# –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ: –∫—Ä–∏—Ç–µ—Ä–∏–π "–≤—ã—É—á–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ 5"
MASTERY_CONSECUTIVE_CORRECT = 3      # —Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥
MASTERY_MIN_ATTEMPTS = 3             # –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
MASTERY_SUCCESS_RATE = 0.75          # –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç (75%)

# –ü–æ–∫–∞–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
PROGRESS_UPDATE_INTERVAL = 10        # –∫–∞–∂–¥—ã–µ N –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

# ============================================================================
# –ü–ê–†–ê–ú–ï–¢–†–´ –ì–ï–ù–ï–†–ê–¶–ò–ò –í–ê–†–ò–ê–ù–¢–û–í
# ============================================================================

VARIANTS_COUNT = 3                  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞ —Å–ª–æ–≤–æ

# ============================================================================
# –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø
# ============================================================================

MAX_WORDS_IN_DICTIONARY = 50         # –º–∞–∫—Å–∏–º—É–º —Å–ª–æ–≤ –≤ —Å–ª–æ–≤–∞—Ä–µ
MAX_FILE_SIZE = 10 * 1024 * 1024     # 10MB –º–∞–∫—Å–∏–º—É–º –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

# ============================================================================
# –õ–û–ì–ò–†–û–í–ê–ù–ò–ï
# ============================================================================

LOG_FILE = LOGS_DIR / "bot.log"
LOG_LEVEL = "INFO"
LOG_FORMAT = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# üîÑ –ü–ê–†–ê–ú–ï–¢–†–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø –õ–û–ì–ê–ú–ò
# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (—É–¥–æ–±–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
CLEAR_LOGS_ON_START = os.getenv("CLEAR_LOGS_ON_START", "true").lower() == "true"

# ‚öôÔ∏è –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ª–æ–≥–æ–≤ (10 MB = 10485760 bytes)
MAX_LOG_SIZE = int(os.getenv("MAX_LOG_SIZE", 10485760))

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ backup —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è
MAX_LOG_BACKUPS = int(os.getenv("MAX_LOG_BACKUPS", 5))
