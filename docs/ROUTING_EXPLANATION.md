# ๐ก ะะฑัััะฝะตะฝะธะต ัะธััะตะผั ัะพััะธะฝะณะฐ ะฒ aiogram

## ๐ฏ ะัะพะฑะปะตะผะฐ: ะะพััะดะพะบ ะธะผะตะตั ะทะฝะฐัะตะฝะธะต!

ะ aiogram **ะฟะพััะดะพะบ ัะตะณะธัััะฐัะธะธ ัะพััะตัะพะฒ ะพะฟัะตะดะตะปัะตั ะฟัะธะพัะธัะตั ะพะฑัะฐะฑะพัะบะธ ัะพะพะฑัะตะฝะธะน**.

```
ะกะพะพะฑัะตะฝะธะต ะพั ะฟะพะปัะทะพะฒะฐัะตะปั
    โ
ะะธัะฟะตััะตั ะฟัะพะฒะตััะตั ัะพััะตัั ะฟะพ ะฟะพััะดะบั ัะตะณะธัััะฐัะธะธ
    โ
1๏ธโฃ ะะตัะฒัะน ัะพััะตั - ะบะพะผะฐะฝะดั (/start, /help, /menu)
    โ ะัะปะธ ะผะฐััะธั? โ ะะฑัะฐะฑะพัะฐัั ะธ ะะซะะขะ
    โ ะัะปะธ ะฝะต ะผะฐััะธั? โ ะะดัะธ ะดะฐะปััะต
    โ
2๏ธโฃ ะัะพัะพะน ัะพััะตั - TTS ะบะพะผะฐะฝะดั
    โ ะัะปะธ ะผะฐััะธั? โ ะะฑัะฐะฑะพัะฐัั ะธ ะะซะะขะ
    โ ะัะปะธ ะฝะต ะผะฐััะธั? โ ะะดัะธ ะดะฐะปััะต
    โ
3๏ธโฃ ะขัะตัะธะน ัะพััะตั - ัะพัะพ
    โ ะัะปะธ ะผะฐััะธั? โ ะะฑัะฐะฑะพัะฐัั ะธ ะะซะะขะ
    โ ะัะปะธ ะฝะต ะผะฐััะธั? โ ะะดัะธ ะดะฐะปััะต
    โ
4๏ธโฃ ะงะตัะฒััััะน ัะพััะตั - ะพะฑัะธะน ัะตะบัั (ัะปะพะฒะฐัะธ)
    โ ะัะปะธ ะผะฐััะธั? โ ะะฑัะฐะฑะพัะฐัั ะธ ะะซะะขะ
    โ ะัะปะธ ะฝะต ะผะฐััะธั? โ ะะพะปััะต ะฝะตั ะพะฑัะฐะฑะพััะธะบะพะฒ!
```

## โ ะะ: ะะตะฟัะฐะฒะธะปัะฝัะน ะฟะพััะดะพะบ

```python
router.include_router(dictionary_router)   # โ ะะะะะซะ - ะปะพะฒััะบะฐ ะดะปั F.text!
router.include_router(photo_router)
router.include_router(start_router)        # โ ะะพะผะฐะฝะดั /start ะะะกะะ ะปะพะฒััะบะธ!
router.include_router(tts_test_router)
```

### ะงัะพ ะฟัะพะธััะพะดะธะปะพ:

```
ะกะพะพะฑัะตะฝะธะต "/start"
    โ
1๏ธโฃ dictionary_router ะฟัะพะฒะตััะตั: F.text - ะะ! โ ะญัะพ ัะตะบัั
    โ
    handle_edited_dictionary() ััะฐะฑะพัะฐะป ะะะ ััะปะพะฒะธั
    (ะธะปะธ ะฒะตัะฝัะป True, ะฟะตัะตัะฒะฐัะธะฒ ัะพะพะฑัะตะฝะธะต)
    โ
โ /start ะฝะธะบะพะณะดะฐ ะฝะต ะดะพัะปะฐ ะดะพ start_router!
```

## โ ะะะกะะ: ะัะฐะฒะธะปัะฝัะน ะฟะพััะดะพะบ

```python
router.include_router(start_router)        # โ ะะะะะซะ - ะบะพะผะฐะฝะดั
router.include_router(tts_test_router)     # โ ะะพะผะฐะฝะดั
router.include_router(photo_router)        # โ ะกะฟะตัะธัะธัะฝัะต ัะธะปัััั
router.include_router(dictionary_router)   # โ ะะะกะะะะะะ - ะปะพะฒััะบะฐ F.text
```

### ะงัะพ ะฟัะพะธััะพะดะธั ัะตะฟะตัั:

```
ะกะพะพะฑัะตะฝะธะต "/start"
    โ
1๏ธโฃ start_router ะฟัะพะฒะตััะตั: Command("start") - ะะ! โ ะญัะพ ะบะพะผะฐะฝะดะฐ
    โ
    cmd_start() ััะฐะฑะพัะฐะปะฐ ะธ ะพะฑัะฐะฑะพัะฐะปะฐ ัะพะพะฑัะตะฝะธะต
    โ
โ /start ััะฟะตัะฝะพ ะพะฑัะฐะฑะพัะฐะฝะฐ!
```

## ๐ ะคะธะปัััั ะฒ ะฟะพััะดะบะต ัะฟะตัะธัะธัะฝะพััะธ

### ะกะฟะตัะธัะธัะฝัะต (ะดะพะปะถะฝั ะฑััั ะะะะะซะะ)
```python
@router.message(Command("start"))                    # ะขะพะปัะบะพ /start
@router.message(F.photo)                            # ะขะพะปัะบะพ ัะพัะพ
@router.message(F.text, F.text.startswith("/"))     # ะขะพะปัะบะพ ะบะพะผะฐะฝะดั
```

### ะะพะปััะฟะตัะธะฐะปัะฝัะต (ะฒ ะกะะะะะะะ)
```python
@router.message(F.document)                         # ะขะพะปัะบะพ ะดะพะบัะผะตะฝัั
@router.message(F.voice)                            # ะขะพะปัะบะพ ะณะพะปะพั
```

### ะะฑัะธะต (ะดะพะปะถะฝั ะฑััั ะะะกะะะะะะะ)
```python
@router.message(F.text)                             # ะะกะ ัะตะบััะพะฒัะต ัะพะพะฑัะตะฝะธั!
@router.message()                                   # ะะกะ ัะพะพะฑัะตะฝะธั!
```

## ๐ก๏ธ ะะฐัะธัะฐ ะฒ ะพะฑัะฐะฑะพััะธะบะฐั

ะะฐะถะต ะตัะปะธ ะพะฑัะฐะฑะพััะธะบ ะทะฐัะตะณะธัััะธัะพะฒะฐะฝ ัะฐะฝััะต, ะผะพะถะฝะพ ะฒะตัะฝััั `False` ะธะปะธ `return`:

```python
@router.message(F.text)  # ะะพะฒะธั ะะกะ ัะตะบัั
async def handle_text(message: Message):
    user_id = message.from_user.id
    session = load_user_session(user_id)
    
    # ะัะพะฒะตัะบะฐ: ะฝัะถะฝะพ ะปะธ ะผะฝะต ะพะฑัะฐะฑะฐััะฒะฐัั ััะพ ัะพะพะฑัะตะฝะธะต?
    if not session or session.get("mode") != "editing_dictionary":
        return  # โ ะะ ะพะฑัะฐะฑะฐััะฒะฐะตะผ! ะะดัะผ ะบ ัะปะตะดัััะตะผั ัะพััะตัั
    
    # ะัะปะธ ะผั ะทะดะตัั, ัะพ ััะพ ัะตะฐะปัะฝะพ ัะพะพะฑัะตะฝะธะต ะดะปั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั
    await handle_editing(message, session)
```

## ๐ ะขะฐะฑะปะธัะฐ ัะธะปัััะพะฒ

| ะคะธะปััั | ะะฟะธัะฐะฝะธะต | ะกะฟะตัะธัะธัะฝะพััั |
|--------|---------|---|
| `Command("start")` | ะขะพะปัะบะพ ะบะพะผะฐะฝะดะฐ /start | ๐ด ะัะตะฝั ะฒััะพะบะฐั |
| `F.photo` | ะขะพะปัะบะพ ัะพัะพะณัะฐัะธะธ | ๐ด ะัะตะฝั ะฒััะพะบะฐั |
| `F.text, ~F.text.startswith("/")` | ะขะตะบัั, ะฝะพ ะฝะต ะบะพะผะฐะฝะดั | ๐ ะััะพะบะฐั |
| `F.document` | ะขะพะปัะบะพ ะดะพะบัะผะตะฝัั | ๐ ะััะพะบะฐั |
| `F.text` | ะะกะ ัะตะบััะพะฒัะต ัะพะพะฑัะตะฝะธั | ๐ก ะะะะะะฏ |
| (ะฝะธัะตะณะพ) | ะะกะ ัะพะพะฑัะตะฝะธั | ๐ด ะะงะะะฌ ะะะะะะฏ |

## ๐ฏ ะัะฐะฒะธะปะพ ะทะพะปะพัะพะณะพ ัะตัะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ะกะะะฆะะคะะงะะซะ ะะะะะะะขะงะะะ (ะฟะตัะฒัะต)  โ  โ /start, /help, ัะพัะพ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ   ะะะะฃะกะะะฆะะะะฌะะซะ (ะฒ ัะตัะตะดะธะฝะต)      โ  โ ะดะพะบัะผะตะฝัั, ะณะพะปะพั
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ   ะะะฉะะ ะะะะะะะขะงะะะ (ะฟะพัะปะตะดะฝะธะต)     โ  โ F.text, F.message()
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะัะฐะบัะธัะตัะบะธะน ะฟัะธะผะตั

```python
# handlers/__init__.py

router = Router()

# 1๏ธโฃ ะกะะะฆะะคะะงะะซะ (ะดะพะปะถะฝั ะฑััั ะฟะตัะฒัะผะธ)
router.include_router(commands_router)      # /start, /help, /menu
router.include_router(admin_router)         # /admin ะบะพะผะฐะฝะดั

# 2๏ธโฃ ะะะะฃะกะะะฆะะะะฌะะซะ
router.include_router(photo_router)         # ะขะพะปัะบะพ ัะพัะพ
router.include_router(voice_router)         # ะขะพะปัะบะพ ะณะพะปะพั
router.include_router(file_router)          # ะขะพะปัะบะพ ัะฐะนะปั

# 3๏ธโฃ ะะะฉะะ (ะดะพะปะถะฝั ะฑััั ะฟะพัะปะตะดะฝะธะผะธ)
router.include_router(text_router)          # F.text - ะผะพะถะตั ะฑััั ะปะพะฒััะบะพะน
router.include_router(unknown_router)       # ะัั ะพััะฐะปัะฝะพะต
```

## โ๏ธ ะขะธะฟะธัะฝัะต ะพัะธะฑะบะธ

```python
# โ ะะะะะะะะะฌะะ - ะปะพะฒััะบะฐ ะฟะตัะตัะฒะฐัะธั ะฒัะต ัะพัะพ
router.include_router(text_router)        # F.text ะบะฐะบ ะพะฑัะธะน ะพะฑัะฐะฑะพััะธะบ
router.include_router(photo_router)       # ะคะพัะพ ัะถะต ะฝะต ะดะพะฑะตััััั ััะดะฐ

# โ ะะะะะะะฌะะ - ัะพัะพ ะพะฑัะฐะฑะพัะฐะฝั ะฒ ะฟะตัะฒัั ะพัะตัะตะดั
router.include_router(photo_router)       # ะคะพัะพ ะฟะตัะฒัะผะธ
router.include_router(text_router)        # ะขะตะบัั ะฟะพัะพะผ (ะตัะปะธ ััะพ ะปะพะฒััะบะฐ)
```

---

**ะะพะผะฝะธัะต:** ะ aiogram **ะฟะพััะดะพะบ ัะตะณะธัััะฐัะธะธ = ะฟะพััะดะพะบ ะฟัะธะพัะธัะตัะฐ!** ๐
