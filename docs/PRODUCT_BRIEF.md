# Product Brief: Телеграм-бот для изучения словарных слов

## 1. Описание проекта

Телеграм-бот для помощи школьникам в запоминании и отработке правильного написания словарных слов русского языка. Пользователь делает фотографию списка слов из учебника или тетради, бот распознаёт слова и создаёт интерактивную тренировочную сессию с голосовым озвучиванием и выбором правильного варианта написания.

## 2. Целевая аудитория

- **Основная**: школьники начальных и средних классов (1-6 класс)
- **Вторичная**: родители, которые помогают детям учить словарные слова

## 3. Основные преимущества и функции

### Ключевые возможности:
- **Фото-загрузка**: школьник фотографирует список словарных слов из учебника/тетради
- **Распознавание и редактирование**: автоматическое распознавание слов с возможностью отредактировать список перед началом
- **Голосовое озвучивание**: бот произносит каждое слово вслух (аудио)
- **Интерактивное тестирование**: выбор из нескольких вариантов написания (правильный + неправильные)
- **Мгновенная обратная связь**: сразу показывает правильно или нет
- **Адаптивный алгоритм обучения**: система повторения в рамках сессии с приоритетом сложных слов
- **Обучение до результата**: сессия продолжается пока все слова не будут выучены на "отлично"
- **Отслеживание прогресса**: чёткий критерий выученности на оценку "5"

### Преимущества:
- Не нужно вручную вводить слова
- Развивает слуховое восприятие через озвучку
- Геймификация процесса обучения
- Адаптивная система, фокусирующаяся на проблемных словах
- Удобство использования в привычном мессенджере

## 4. Технологический стек и архитектура

### Основные компоненты:
- **Frontend**: Telegram Bot API (python-telegram-bot или aiogram)
- **Backend**: Python
- **Хранилище данных**: Файловая система (папка `data/`)
  - JSON файлы для словарей пользователей
  - JSON файлы для прогресса обучения
  - Кэш аудиофайлов и фотографий
- **AI сервисы** (через OpenRouter):
  - Vision API для распознавания текста с фотографий
  - TTS (Text-to-Speech) для генерации голосового озвучивания
  - LLM API для генерации неправильных вариантов написания слов

### Архитектурные решения:
- **Оптимизация токенов и стоимости**: 
  - Batch-генерация вариантов: один запрос для всех слов словаря
  - Кэширование аудио и вариантов для переиспользования
  - Генерация вариантов сразу при создании словаря (12 вариантов на слово)
  - Использование недорогих моделей (Claude Haiku) для генерации вариантов
  - Мгновенное обучение: все данные готовы до начала сессии
- **Алгоритм обучения**: 
  - Адаптивное повторение в рамках одной сессии до полного усвоения
  - Критерий выученности: 3 правильных ответа подряд + 75% успешности
  - Динамическая сложность вариантов в зависимости от количества ошибок
  - Приоритизация слов с ошибками для более частого повторения
- **Обработка изображений**:
  - Предобработка фото перед отправкой в Vision API (улучшение контраста, поворот)
  - Batch-обработка для экономии запросов

### Дополнительные технические детали:
- Telegram Bot для взаимодействия с пользователем (polling)
- Структура папки `data/`:
  - `data/users/{user_id}/` - данные каждого пользователя
  - `data/users/{user_id}/dictionaries/` - словари пользователя
  - `data/users/{user_id}/progress.json` - прогресс обучения
  - `data/users/{user_id}/photos/` - загруженные фотографии
  - `data/audio_cache/` - кэш аудиофайлов для переиспользования
  - `data/variants_cache/` - кэш неправильных вариантов написания слов
- Конфигурация разделена на модули:
  - `config/settings.py` - пути и константы
  - `config/models.py` - модели OpenRouter
  - `config/prompts.py` - промпты для AI (легко редактируются)

---

**Версия**: 1.0  
**Дата создания**: 25 октября 2025  
**Статус**: Планирование

